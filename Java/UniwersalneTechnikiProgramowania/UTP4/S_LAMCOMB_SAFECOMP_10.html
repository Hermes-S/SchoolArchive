<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1250"><title>S_LAMCOMB_SAFECOMP</title></head>
<body><h2>Zadanie badawczo-analityczne:&nbsp;</h2><h2>klasa InputConverter - bezpieczeñstwo w fazie kompilacji (œcis³a kontrola typów w generics)</h2>Zobaczmy przyk³adowy fragment z poprzedniego zadania:<br><pre>  public static void main(String[] args) {<br>    /*<br>     *  definicja operacji w postaci lambda-wyra¿eñ:<br>     *  - flines - zwraca listê wierszy z pliku tekstowego<br>     *  - join - ³¹czy napisy z listy (zwraca napis po³¹czonych ze sob¹ elementów listy napisów)<br>     *  - collectInts - zwraca listê liczb ca³kowitych zawartych w napisie<br>     *  - sum - zwraca sumê elmentów listy liczb ca³kowitych<br>     */<br><br>    String fname = System.getProperty("user.home") + "/LamComFile.txt"; <br>    InputConverter&lt;String&gt; fileConv = new InputConverter&lt;&gt;(fname);<br>    List&lt;String&gt; lines = fileConv.convertBy(flines);<br>    String text = fileConv.convertBy(flines, join);<br>    List&lt;Integer&gt; ints = fileConv.convertBy(flines, join, collectInts);<br>    Integer sumints = fileConv.convertBy(flines, join, collectInts, sum);<br><br>    System.out.println(lines);<br>    System.out.println(text);<br>    System.out.println(ints);<br>    System.out.println(sumints);<br><br>    List&lt;String&gt; arglist = Arrays.asList(args);<br>    InputConverter&lt;List&lt;String&gt;&gt; slistConv = new InputConverter&lt;&gt;(arglist);  <br>    sumints = slistConv.convertBy(join, collectInts, sum);<br>    System.out.println(sumints);<br>  }</pre>W tym kontekœcie przy powierzchownej konstrukcji klasy InputConverter i metody convertBy nastêpuj¹cy fragment:<br><br>&nbsp;&nbsp;&nbsp; slistConv.convertBy(collectInts, sum); &nbsp;//&nbsp; <span style="font-weight: bold;">[1]</span><br><br>&nbsp;spowoduje powstanie wyj¹tku ClassCastException&nbsp;<br><br><span style="font-weight: bold;">Zadania badawcze</span>:<br>jak temu zaradziæ w fazie kompilacji programu, tak by kompilator oznaczy³ [1] jako b³¹d?<br>PodpowiedŸ:
to wymaga odpowiedniej definicji klasy InputConverter, &nbsp;wszelkie
modyfikacje klasy Main s¹ te¿ dozwolone, &nbsp; ale niekonieczne (a
nawet niepotrzebne).&nbsp; <br><br><br><br><br></body></html>