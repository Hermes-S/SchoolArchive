<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0067)https://sdkp.pjwstk.edu.pl/html/staskshtml/S_RMIIIOP/S_RMIIIOP.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
  <title>S_RMIIIOP</title></head>

<body><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; display: inline ! important; float: none;">Rozwa¿my&nbsp;
przyk³ad znanego z wyk³adów serwera&nbsp; - ksi¹¿ki telefonicznej.
Serwer ma dostêp do "bazy" numerów telefonów. Dla prostoty wykorzystamy
mapê, w której osobom-kluczom bêd¹ przypisane numery telefonów -
wartoœci, a dostêp do niej zrealizujemy poprzez klasê PhoneDirectory.</span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px;">import java.util.*;<br>import java.io.*;<br><br>public class PhoneDirectory {<br><br>  private Map pbMap = new HashMap();<br><br>  public PhoneDirectory(String fileName) {<br>    // Inicjalna zawartoœæ ksi¹¿ki telefonicznej<br>    // jest wczytywana z pliku o formacie<br>    //  imiê  numer_telefonu<br>    try {<br>      BufferedReader br = new BufferedReader(<br>                             new FileReader(fileName));<br>      String line;<br>      while ((line = br.readLine()) != null) {<br>        String[] info = line.split(" +", 2);<br>        pbMap.put(info[0], info[1]);<br>      }<br>    } catch (Exception exc) {<br>        exc.printStackTrace();<br>        System.exit(1);<br>    }<br>  }<br><br>  // Zwraca numer telefonu dla podanej osoby<br>  public String getPhoneNumber(String name) {<br>    return (String) pbMap.get(name);<br>  }<br><br>  // Dodaje now¹ osobê do ksi¹¿ki<br>  // Wynik:<br>  // - true - dodana<br>  // - false - nie (przy próbie dodania osoby zapisanej ju¿ w ksi¹¿ce)<br>  public boolean addPhoneNumber(String name, String num) {<br>    if (pbMap.containsKey(name)) return false;<br>    pbMap.put(name, num);<br>    return true;<br>  }<br><br>  // Zastêpuje numer podanej osoby nowym<br>  // Wynik:<br>  // - true (numer zast¹piony)<br>  // - false (nie - próba podania nowegu numeru nieistniej¹cej osoby)<br>  public boolean replacePhoneNumber(String name, String num) {<br>    if (!pbMap.containsKey(name)) return false;<br>    pbMap.put(name, num);<br>    return true;<br>  }<br><br>}&nbsp; </pre><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; display: inline ! important; float: none;">Serwer przez gniazda TCP/IP (z u¿yciem kana³ów i selektorów)&nbsp; obs³uguje zlecenia klientów:<span class="Apple-converted-space">&nbsp;</span></span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><ul style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><li><b>get imiê</b><span class="Apple-converted-space">&nbsp;</span>(podaj numer telefonu dla wskazanej osoby),</li><li><b>add imiê numer</b><span class="Apple-converted-space">&nbsp;</span>(dopisz do ksi¹¿ki osobê i jej numer telefoniczny),</li><li><b>replace imiê numer</b><span class="Apple-converted-space">&nbsp;</span>(zast¹p w ksi¹¿ece numer telefony pdoanej osoby nowym numerem).</li><li><b>bye</b><span class="Apple-converted-space">&nbsp;</span>( zakoñczenie komunikacji)<br></li></ul><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; display: inline ! important; float: none;">Na
ka¿de zlecenie klienta serwer odpowiada posy³aj¹c (jako jeden wiersz)
kod numeryczny wyniku przetworzenia zlecenia oraz opis tego wyniku.
Przy zleceniu get posy³any jest w odpowiedzi dodatkowy, kolejny wiersz
zawieraj¹cy numer telefonu.</span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; text-decoration: underline;">Zadanie</span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; font-weight: bold;">omówion¹ wy¿ej aplikacjê&nbsp; napisaæ za pomoc¹ protoko³u RMI-IIOP.</span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium; display: inline ! important; float: none;">Porównaæ nak³ady pracy przy jednym (bezpoœrednie u¿ycie gniazd i TCP/IP) i przy drugim podejœciu (RMI-IIOP)..</span><br style="color: rgb(0, 0, 0); font-family: &#39;&#39;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;">
</body></html>